!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);class r{constructor(){this.rgb=this.getRGB()}getRGB(){const e=[];return e[0]=Math.round(255*Math.random()),e[1]=Math.round(255*Math.random()),e[2]=Math.round(255*Math.random()),e}getBackgroundColor(){return`rgb(${this.rgb[0]},${this.rgb[1]},${this.rgb[2]})`}getTextColor(){return Math.round((299*parseInt(this.rgb[0])+587*parseInt(this.rgb[1])+114*parseInt(this.rgb[2]))/1e3)>125?"black":"white"}}class n{constructor(e,t,a){this.name=e,this.ruName=t,this.keyCode=a,this.element=null,this.action=null,this.keyPressedAction=null}set onclickAction(e){this.action=e,this.element.addEventListener("click",e)}set onPressAction(e){this.keyPressedAction=e,this.element.addEventListener("mousedown",e)}set onReleaseAction(e){document.addEventListener("mouseup",e),document.addEventListener("keyup",e)}getKeyLabel(e){return"EN"===e?this.name.toLowerCase():this.ruName.toLowerCase()}setTextContext(e){this.element.textContent=this.getKeyLabel(e)}createKeyButton(e,...t){const a=document.createElement("button");return a.setAttribute("type","button"),a.setAttribute("data-key",this.keyCode),a.classList.add("keyboard__key"),void 0!==t&&a.classList.add(...t),void 0!==e&&(a.innerHTML=this.createKeyIconHTML(e)),this.element=a,a}createKeyIconHTML(e){return`<i class="material-icons">${e}</i>`}}const o=["backspace","p","enter","?"],s=[{name:"1",ruName:"1",keyCode:49},{name:"2",ruName:"2",keyCode:50},{name:"3",ruName:"3",keyCode:51},{name:"4",ruName:"4",keyCode:52},{name:"5",ruName:"5",keyCode:53},{name:"6",ruName:"6",keyCode:54},{name:"7",ruName:"7",keyCode:55},{name:"8",ruName:"8",keyCode:56},{name:"9",ruName:"9",keyCode:57},{name:"0",ruName:"0",keyCode:48},{name:"backspace",ruName:"backspace",keyCode:8},{name:"tab",ruName:"tab",keyCode:9},{name:"q",ruName:"й",keyCode:81},{name:"w",ruName:"ц",keyCode:87},{name:"e",ruName:"у",keyCode:69},{name:"r",ruName:"к",keyCode:82},{name:"t",ruName:"е",keyCode:84},{name:"y",ruName:"н",keyCode:89},{name:"u",ruName:"г",keyCode:85},{name:"i",ruName:"ш",keyCode:73},{name:"o",ruName:"щ",keyCode:79},{name:"p",ruName:"з",keyCode:80},{name:"capslock",ruName:"capslock",keyCode:20},{name:"a",ruName:"ф",keyCode:65},{name:"s",ruName:"ы",keyCode:83},{name:"d",ruName:"в",keyCode:68},{name:"f",ruName:"а",keyCode:70},{name:"g",ruName:"п",keyCode:71},{name:"h",ruName:"р",keyCode:72},{name:"j",ruName:"о",keyCode:74},{name:"k",ruName:"л",keyCode:75},{name:"l",ruName:"д",keyCode:76},{name:"enter",ruName:"enter",keyCode:13},{name:"shift",ruName:"shift",keyCode:16},{name:"z",ruName:"я",keyCode:90},{name:"x",ruName:"ч",keyCode:88},{name:"c",ruName:"с",keyCode:67},{name:"v",ruName:"м",keyCode:86},{name:"b",ruName:"и",keyCode:66},{name:"n",ruName:"т",keyCode:78},{name:"m",ruName:"ь",keyCode:77},{name:",",ruName:"б",keyCode:188},{name:".",ruName:"ю",keyCode:190},{name:"?",ruName:".",keyCode:191},{name:"space",ruName:"space",keyCode:32}];class i{constructor(e){this.keyboardElements={main:null,keysContainer:null,keys:[],textColor:null},this.textArea=e,this.properties={value:"",capsLock:!1,language:"EN",source:[]}}get inputValue(){return this.getInputValue()}createKeyboard(){return this.keyboardElements.main=document.createElement("div"),this.keyboardElements.main.classList.add("keyboard"),this.keyboardElements.keysContainer=document.createElement("div"),this.keyboardElements.keysContainer.classList.add("keyboard__keys"),this.keyboardElements.keysContainer.append(this.createKeys()),this.keyboardElements.keys=this.keyboardElements.keysContainer.querySelectorAll(".keyboard__key"),this.keyboardElements.main.append(this.keyboardElements.keysContainer),this.keyboardElements.main}paintKeyboard(){const e=new r,t=e.getTextColor(),a=e.getBackgroundColor();this.keyboardElements.main.style.backgroundColor=a,document.querySelectorAll(".keyboard__key").forEach(e=>{e.style.color=t}),this.keyboardElements.textColor=t}createKeys(){let e=document.createDocumentFragment();return s.forEach(t=>{const a=new n(t.name,t.ruName,t.keyCode);switch(t.name){case"backspace":a.createKeyButton("backspace","keyboard__key_wide"),a.onclickAction=()=>{this.handleBackspaceAction()};break;case"tab":a.createKeyButton("keyboard_tab","keyboard__key_wide"),a.onclickAction=()=>{this.handleTabAction()};break;case"capslock":a.createKeyButton("keyboard_capslock","keyboard__key_wide","keyboard__key_activatable"),a.onclickAction=()=>{this.handleCapsLockAction()};break;case"shift":a.createKeyButton("vertical_align_top","keyboard__key_wide"),a.onclickAction=()=>{};break;case"enter":a.createKeyButton("keyboard_return","keyboard__key_wide"),a.onclickAction=()=>{this.handleEnterAction()};break;case"space":a.createKeyButton("space_bar","keyboard__key_extra-wide"),a.onclickAction=()=>{this.handleSpaceAction()};break;default:a.createKeyButton(),a.onclickAction=()=>{this.handleKeyAction(a)},a.setTextContext(this.properties.language)}a.onPressAction=()=>{"white"===this.keyboardElements.textColor?a.element.classList.add("keyboard__key_pressed","keyboard__key_pressed-light"):a.element.classList.add("keyboard__key_pressed","keyboard__key_pressed-dark")},a.onReleaseAction=()=>{a.element.classList.remove("keyboard__key_pressed","keyboard__key_pressed-light","keyboard__key_pressed-dark")},e.append(a.element),e=this.checkLineBreak(e,t.name),this.properties.source.push(a)}),e}handleKeyboardTyping(e){const t=this.properties.source.filter(t=>t.keyCode===e.keyCode);if(0===t.length)return;const a=t[0];e.preventDefault(),a.keyPressedAction(),a.action()}checkLineBreak(e,t){return-1!==o.indexOf(t)&&e.append(document.createElement("br")),e}updateInputValue(){this.textArea.setValue(this.properties.value)}getInputValue(){return this.textArea.getValue()}handleBackspaceAction(){const e=this.inputValue;this.properties.value=e.substring(0,e.length-1),this.updateInputValue()}handleTabAction(){this.properties.value=`${this.inputValue}   `,this.updateInputValue()}handleCapsLockAction(){this.toggleCapsLock();const e=this.properties.source.filter(e=>20===e.keyCode)[0].element;"white"===this.keyboardElements.textColor?e.classList.toggle("keyboard__key_active-light",this.properties.capsLock):e.classList.toggle("keyboard__key_active-dark",this.properties.capsLock),this.updateInputValue()}toggleCapsLock(){this.properties.capsLock=!this.properties.capsLock,this.keyboardElements.keys.forEach(e=>{0===e.childElementCount&&(e.textContent=this.properties.capsLock?e.textContent.toUpperCase():e.textContent.toLowerCase())})}handleEnterAction(){this.properties.value=`${this.inputValue}\n`,this.updateInputValue()}handleSpaceAction(){this.properties.value=`${this.inputValue} `,this.updateInputValue()}handleKeyAction(e){const t=e.getKeyLabel(this.properties.language);this.properties.value=this.properties.capsLock?this.inputValue+t.toUpperCase():this.inputValue+t.toLowerCase(),this.updateInputValue()}}class d{constructor(){this.textArea=null}createTextArea(){return this.textArea=document.createElement("textarea"),this.textArea.classList.add("keyboard-input"),this.textArea}getValue(){return this.textArea.value}setValue(e){this.textArea.value=e,this.setCursor(e.length)}setCursor(e){this.textArea.focus(),this.textArea.selectionStart=e,this.textArea.selectionEnd=e}}window.addEventListener("DOMContentLoaded",()=>{const e=new d,t=e.createTextArea(),a=new i(e),r=a.createKeyboard();document.body.append(t),document.body.append(r),a.paintKeyboard(),t.addEventListener("keydown",e=>{a.handleKeyboardTyping(e)})})}]);